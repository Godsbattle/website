{{ define "main" }}
<style>
  /* â”€â”€ Badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .pt-badge {
    display: inline-block;
    padding: 0.3rem 1rem;
    border-radius: 999px;
    background: rgba(128,128,128,0.25);
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
  }

  /* â”€â”€ CTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .pt-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.85rem 2.5rem;
    border-radius: 0.65rem;
    font-weight: 600;
    font-size: 1rem;
    background: #000;
    color: #fff;
    position: relative;
    overflow: hidden;
    transition: box-shadow 0.25s ease, transform 0.18s ease, opacity 0.15s;
  }
  .dark .pt-cta {
    background: #fff;
    color: #000;
  }
  /* Hover: lift + glow */
  .pt-cta:hover {
    opacity: 1;
    transform: translateY(-1px) scale(1.015);
  }
  :root:not(.dark) .pt-cta:hover {
    box-shadow: 0 8px 28px rgba(0,0,0,0.28), 0 2px 8px rgba(0,0,0,0.12);
  }
  .dark .pt-cta:hover {
    box-shadow: 0 0 32px 6px rgba(255,255,255,0.18), 0 8px 24px rgba(255,255,255,0.08);
  }
  /* Click: press in */
  .pt-cta:active {
    transform: scale(0.97) translateY(0) !important;
    transition-duration: 0.07s !important;
  }
  /* Ripple */
  .pt-ripple {
    position: absolute;
    border-radius: 50%;
    transform: scale(0);
    animation: pt-ripple-anim 0.55s ease-out forwards;
    pointer-events: none;
  }
  :root:not(.dark) .pt-ripple { background: rgba(255,255,255,0.4); }
  .dark .pt-ripple             { background: rgba(0,0,0,0.12); }
  @keyframes pt-ripple-anim {
    to { transform: scale(5); opacity: 0; }
  }

  /* â”€â”€ Carousel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .pt-carousel-track {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .pt-carousel-track::-webkit-scrollbar { display: none; }

  .pt-slide {
    scroll-snap-align: center;
    flex-shrink: 0;
    width: 100%;
  }

  .pt-slide img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
    border-radius: 0.75rem 0.75rem 0 0;
  }

  /* Dots */
  .pt-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: currentColor;
    opacity: 0.25;
    transition: opacity 0.2s, width 0.2s;
    cursor: pointer;
  }
  .pt-dot.active {
    width: 20px;
    border-radius: 3px;
    opacity: 1;
  }

  /* â”€â”€ Feature chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .pt-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.3rem 0.8rem;
    border-radius: 999px;
    border: 1px solid rgba(128,128,128,0.2);
    font-size: 0.75rem;
    font-weight: 500;
    opacity: 0.65;
    white-space: nowrap;
  }

  /* â”€â”€ Bottom CTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .pt-cta-outline {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.85rem 2.5rem;
    border-radius: 0.65rem;
    font-weight: 600;
    font-size: 1.05rem;
    border: 1.5px solid currentColor;
    opacity: 0.85;
    transition: opacity 0.15s;
  }
  .pt-cta-outline:hover { opacity: 1; }
</style>

<!-- â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="w-full max-w-4xl mx-auto px-4 sm:px-8 pt-12 pb-0 text-center">

  <div class="flex justify-center mb-5">
    <span class="pt-badge">New Product</span>
  </div>

  <h1 style="font-size: clamp(3rem, 9vw, 6rem); font-weight: 800; letter-spacing: -0.03em; line-height: 1.05;" class="mb-5">
    Prop Tracker ğŸ‘¨ğŸ¾â€ğŸš€
  </h1>

  <p style="font-size: 1.1rem; max-width: 36rem;" class="mx-auto opacity-50 leading-relaxed mb-10">
    Track every prop firm challenge, payout, and expense â€” all in one place.
    Built for funded traders who want clarity, not chaos.
  </p>

</section>

<!-- â”€â”€ Mockup image (edge-to-edge feel) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="w-full max-w-5xl mx-auto mt-12 px-4 sm:px-6">
  <div class="pt-carousel-track rounded-2xl overflow-hidden" style="background:#ede8df; border: 6px solid #1a1a1a; box-shadow: 0 0 0 1px rgba(255,255,255,0.06);" id="ptTrack">
    <div class="pt-slide">
      <img src="/img/proptracker/desktop.webp" alt="Prop Tracker desktop view"
           onerror="this.closest('.pt-slide').style.display='none'">
    </div>
    <div class="pt-slide">
      <img src="/img/proptracker/mobile-1.webp" alt="Prop Tracker mobile view"
           onerror="this.closest('.pt-slide').style.display='none'">
    </div>
  </div>

  <!-- Dots -->
  <div class="flex items-center justify-center gap-2 mt-4" id="ptDots">
    <button class="pt-dot active" data-idx="0" aria-label="Slide 1"></button>
    <button class="pt-dot" data-idx="1" aria-label="Slide 2"></button>
  </div>
</div>

<!-- â”€â”€ Bottom CTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="text-center mt-16 mb-24">
  <a
    href="https://buy.polar.sh/polar_cl_jyT5xv586SOPKMeldcNMrAq5nOfuMQknlmc6o3MGCvx"
    data-polar-checkout
    data-polar-checkout-theme="dark"
    class="pt-cta"
    style="text-decoration:none;">
    Get Prop Tracker
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
  </a>
  <p class="mt-4 text-xs opacity-30 tracking-wide uppercase">v1 â€” built for funded traders</p>
</div>

<!-- Polar success interceptor â€” MUST load before embed.global.js
     Registers the message listener first so stopImmediatePropagation()
     prevents Polar's deferred handler from navigating window.location -->
<script>
(function () {
  var done = false;
  window.addEventListener('message', function (e) {
    if (done || !e.data || typeof e.data !== 'object') return;
    var d = e.data;

    /* Cover all known Polar message shapes across embed versions */
    var confirmed =
      (d.polar === true && d.event === 'checkout.confirmed') ||
      (d.type === 'polar:checkout:updated' && d.data && d.data.status === 'confirmed') ||
      d.type === 'polar:checkout:confirmed' ||
      d.status === 'confirmed';

    if (!confirmed) return;
    done = true;

    /* If Polar includes a success URL, open it in a new tab */
    var url =
      (d.checkout && d.checkout.successUrl) ||
      (d.data   && (d.data.successUrl || d.data.success_url)) ||
      d.successUrl;
    if (url) window.open(url, '_blank', 'noopener');

    /* Block Polar's embed handler from also navigating window.location */
    try { e.stopImmediatePropagation(); } catch (x) {}

    /* Notify the rest of the page */
    window.dispatchEvent(new CustomEvent('pt:checkout:done'));
  });
})();
</script>

<!-- Polar embed: opens checkout overlay on click -->
<script src="https://cdn.jsdelivr.net/npm/@polar-sh/checkout@0.1/dist/embed.global.js" defer data-auto-init></script>

<script>
  (function () {
    var track = document.getElementById('ptTrack');
    var dots  = document.querySelectorAll('#ptDots .pt-dot');
    if (!track || !dots.length) return;

    var slides = track.querySelectorAll('.pt-slide');

    function goTo(idx) {
      slides[idx].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
      dots.forEach(function (d, i) { d.classList.toggle('active', i === idx); });
    }

    dots.forEach(function (dot) {
      dot.addEventListener('click', function () { goTo(parseInt(dot.dataset.idx)); });
    });

    var observer = new IntersectionObserver(function (entries) {
      entries.forEach(function (e) {
        if (e.isIntersecting) {
          var idx = Array.from(slides).indexOf(e.target);
          if (idx !== -1) dots.forEach(function (d, i) { d.classList.toggle('active', i === idx); });
        }
      });
    }, { root: track, threshold: 0.6 });

    slides.forEach(function (s) { observer.observe(s); });
  })();
</script>

<script>
/* â”€â”€ CTA ripple + branded confetti on Polar checkout completion â”€â”€ */
(function () {

  /* 1. Ripple on click */
  var btn = document.querySelector('.pt-cta');
  if (btn) {
    btn.addEventListener('click', function (e) {
      var r    = btn.getBoundingClientRect();
      var size = Math.max(r.width, r.height) * 2;
      var x    = e.clientX - r.left  - size / 2;
      var y    = e.clientY - r.top   - size / 2;
      var rpl  = document.createElement('span');
      rpl.className = 'pt-ripple';
      rpl.style.cssText = 'width:' + size + 'px;height:' + size + 'px;left:' + x + 'px;top:' + y + 'px;';
      btn.appendChild(rpl);
      setTimeout(function () { rpl.remove(); }, 600);
    });
  }

  /* 2. Branded confetti burst */
  var confettiFired = false;
  function fireConfetti() {
    if (confettiFired) return;
    confettiFired = true;

    var canvas = document.createElement('canvas');
    canvas.style.cssText = 'position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:9999;';
    document.body.appendChild(canvas);
    var ctx = canvas.getContext('2d');
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
    var W = canvas.width, H = canvas.height;

    /* site-palette colours */
    var colors = ['#ffffff','#e2e8f0','#93c5fd','#c4b5fd','#5eead4','#fda4af','#fdba74'];
    var particles = [];
    /* two confetti cannons */
    var origins = [{ x: W * 0.28, y: H * 0.68 }, { x: W * 0.72, y: H * 0.68 }];

    for (var i = 0; i < 150; i++) {
      var o     = origins[i % 2];
      var side  = o.x < W / 2 ? 1 : -1;
      var speed = Math.random() * 9 + 4;
      var deg   = -90 + side * (Math.random() * 45);
      var rad   = deg * Math.PI / 180;
      particles.push({
        x: o.x + (Math.random() - 0.5) * 30, y: o.y,
        vx: Math.cos(rad) * speed,
        vy: Math.sin(rad) * speed,
        size: Math.random() * 7 + 3,
        color: colors[Math.floor(Math.random() * colors.length)],
        rotation: Math.random() * 360,
        rotSpeed: (Math.random() - 0.5) * 10,
        shape: Math.random() > 0.4 ? 'rect' : 'circle',
        wobble: Math.random() * Math.PI * 2,
        wobbleSpeed: Math.random() * 0.08 + 0.04
      });
    }

    var start    = Date.now();
    var duration = 3600;

    function draw() {
      var elapsed  = Date.now() - start;
      if (elapsed > duration) { canvas.remove(); return; }
      ctx.clearRect(0, 0, W, H);
      var progress = elapsed / duration;

      particles.forEach(function (p) {
        p.vy += 0.18;
        p.vx *= 0.99;
        p.wobble += p.wobbleSpeed;
        p.x += p.vx + Math.sin(p.wobble) * 0.4;
        p.y += p.vy;
        p.rotation += p.rotSpeed;
        var alpha = Math.max(0, 1 - Math.pow(progress, 1.5));
        ctx.save();
        ctx.globalAlpha = alpha;
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rotation * Math.PI / 180);
        ctx.fillStyle = p.color;
        if (p.shape === 'rect') {
          ctx.fillRect(-p.size / 2, -p.size * 0.28, p.size, p.size * 0.56);
        } else {
          ctx.beginPath();
          ctx.arc(0, 0, p.size * 0.45, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();
      });
      requestAnimationFrame(draw);
    }
    requestAnimationFrame(draw);
  }

  /* 3. Detect Polar checkout completion via interceptor's CustomEvent */
  window.addEventListener('pt:checkout:done', fireConfetti);
  window.addEventListener('polar:checkout:confirmed', fireConfetti);

})();
</script>
{{ end }}
